<!DOCTYPE html>
<!-- saved from url=(0064)https://www.christophenicault.com/fr/post/introduction_to_shiny/ -->
<html lang="fr-fr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  
  
  <meta name="generator" content="Wowchemy 5.0.0-beta.0 for Hugo">
  

  

  
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Christophe Nicault">

  
  
  
    
  
  <meta name="description" content="IntroductionShiny est un package utilisé pour créer des applications Web interactive avec R.L’application Web peut être intégrée dans un document rmarkdown, une page Web, de manière autonome ou en tant que tableau de bord.">

  
  <link rel="alternate" hreflang="en" href="https://www.christophenicault.com/post/introduction_to_shiny/">
  
  <link rel="alternate" hreflang="fr-fr" href="https://www.christophenicault.com/fr/post/introduction_to_shiny/">

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
  

  
  
  
  <meta name="theme-color" content="#565e8a">
  

  
  

  
  
  
  
    
    
    <link rel="stylesheet" href="./Construisez votre première application avec Shiny _ Christophe Nicault_files/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">
    <link rel="stylesheet" href="./Construisez votre première application avec Shiny _ Christophe Nicault_files/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="./Construisez votre première application avec Shiny _ Christophe Nicault_files/github.min.css" crossorigin="anonymous" title="hl-light">
        <link rel="stylesheet" href="./Construisez votre première application avec Shiny _ Christophe Nicault_files/github.min.css" crossorigin="anonymous" title="hl-dark" disabled="">
      
    

    
    <link rel="stylesheet" href="./Construisez votre première application avec Shiny _ Christophe Nicault_files/leaflet.min.css" integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/lazysizes.min.js.téléchargement" integrity="sha512-TmDwFLhg3UA4ZG0Eb4MIyT1O1Mb+Oww5kFG0uHqXsdbyZz9DcvYQhKpGgNkamAI6h2lGGZq2X8ftOJvF/XjTUg==" crossorigin="anonymous" async=""></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    
      

      
      

      
    

  

  
  
  
    
      
      
      <link rel="stylesheet" href="./Construisez votre première application avec Shiny _ Christophe Nicault_files/css">
    
  

  
  
  
  
  <link rel="stylesheet" href="./Construisez votre première application avec Shiny _ Christophe Nicault_files/wowchemy.css">

  

<script async="" src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WPQHYX4ZN8');
</script>

  

  


  
  

  

  <link rel="manifest" href="https://www.christophenicault.com/fr/index.webmanifest">
  <link rel="icon" type="image/png" href="https://www.christophenicault.com/images/icon_hua07d1870b59701766326ad16f5e6b2e0_27776_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="https://www.christophenicault.com/images/icon_hua07d1870b59701766326ad16f5e6b2e0_27776_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="https://www.christophenicault.com/fr/post/introduction_to_shiny/">

  
  
  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="Christophe Nicault">
  <meta property="og:url" content="https://www.christophenicault.com/fr/post/introduction_to_shiny/">
  <meta property="og:title" content="Construisez votre première application avec Shiny | Christophe Nicault">
  <meta property="og:description" content="IntroductionShiny est un package utilisé pour créer des applications Web interactive avec R.L’application Web peut être intégrée dans un document rmarkdown, une page Web, de manière autonome ou en tant que tableau de bord."><meta property="og:image" content="https://www.christophenicault.com/images/icon_hua07d1870b59701766326ad16f5e6b2e0_27776_512x512_fill_lanczos_center_2.png">
  <meta property="twitter:image" content="https://www.christophenicault.com/images/icon_hua07d1870b59701766326ad16f5e6b2e0_27776_512x512_fill_lanczos_center_2.png"><meta property="og:locale" content="fr-fr">
  
    
      <meta property="article:published_time" content="2020-11-18T00:00:00+00:00">
    
    <meta property="article:modified_time" content="2020-11-18T00:00:00+00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.christophenicault.com/fr/post/introduction_to_shiny/"
  },
  "headline": "Construisez votre première application avec Shiny",
  
  "datePublished": "2020-11-18T00:00:00Z",
  "dateModified": "2020-11-18T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Christophe Nicault"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Christophe Nicault",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.christophenicault.com/images/icon_hua07d1870b59701766326ad16f5e6b2e0_27776_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "Introduction\rShiny est un package utilisé pour créer des applications Web interactive avec R.\rL’application Web peut être intégrée dans un document rmarkdown, une page Web, de manière autonome ou en tant que tableau de bord."
}
</script>

  

  


  
  
  
  
  
    <script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/cookieconsent.min.js.téléchargement" integrity="sha256-5VhCqFam2Cn+yjw61zbBNrbHVJ6SRydPeKopYlngbiQ=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./Construisez votre première application avec Shiny _ Christophe Nicault_files/cookieconsent.min.css" integrity="sha256-zQ0LblD/Af8vOppw18+2anxsuaz3pWYyVWi+bTvTH8Q=" crossorigin="anonymous">
  
  <script>
  window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#565e8a",
          "text": "#ffffff"
        },
        "button": {
          "background": "#ffffff",
          "text": "#565e8a"
        }
      },
      "theme": "classic",
      "content": {
        "message": "Ce site utilise des cookies pour vous assurer la meilleure expérience.",
        "dismiss": "Accepter",
        "link": "En savoir plus",
        "href": "/fr/privacy/"
      }
    })});
  </script>



  





  <title>Construisez votre première application avec Shiny | Christophe Nicault</title>

<style></style><link rel="prefetch" href="https://www.christophenicault.com/fr/author/christophe-nicault/"></head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper  "><div role="dialog" aria-live="polite" aria-label="cookieconsent" aria-describedby="cookieconsent:desc" class="cc-window cc-banner cc-type-info cc-theme-classic cc-bottom cc-color-override--146006612 " style=""><!--googleoff: all--><span id="cookieconsent:desc" class="cc-message">Ce site utilise des cookies pour vous assurer la meilleure expérience. <a aria-label="learn more about cookies" role="button" tabindex="0" class="cc-link" href="https://www.christophenicault.com/fr/privacy/" rel="noopener noreferrer nofollow" target="_blank">En savoir plus</a></span><div class="cc-compliance"><a aria-label="dismiss cookie message" role="button" tabindex="0" class="cc-btn cc-dismiss">Accepter</a></div><!--googleon: all--></div>

  
  
  
  
  
  <script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/wowchemy-init.js.téléchargement"></script>

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Rechercher</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="https://www.christophenicault.com/fr/post/introduction_to_shiny/#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Recherche..." autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  <div class="page-header">
    












<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="https://www.christophenicault.com/fr/">Christophe Nicault</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Ouvrir la barre de navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="https://www.christophenicault.com/fr/">Christophe Nicault</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="https://www.christophenicault.com/fr/articles"><span>Articles</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="https://www.christophenicault.com/fr/pages/visualizations"><span>Visualisations</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="https://www.christophenicault.com/fr/services"><span>Services</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="https://www.christophenicault.com/fr/about"><span>A propos</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="https://www.christophenicault.com/fr/post/introduction_to_shiny/#" aria-label="Rechercher"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      

      
      <li class="nav-item dropdown i18n-dropdown">
        <a href="https://www.christophenicault.com/fr/post/introduction_to_shiny/#" class="nav-link " data-toggle="dropdown" aria-haspopup="true">
          <i class="fas fa-globe mr-1" aria-hidden="true"></i></a>
        <div class="dropdown-menu">
          <div class="dropdown-item dropdown-item-active">
            <span>Français</span>
          </div>
          
          <a class="dropdown-item" href="https://www.christophenicault.com/post/introduction_to_shiny/">
            <span>English</span>
          </a>
          
        </div>
      </li>
      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Construisez votre première application avec Shiny</h1>

  

  
    


<div class="article-metadata">

  
  
  
  
  <div>
    

  
  <span><a href="https://www.christophenicault.com/fr/author/christophe-nicault/">Christophe Nicault</a></span>
  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    Nov 18, 2020
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    11 min de lecture
  </span>
  

  
  
  
  
  

  
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/header-attrs.js.téléchargement"></script>


<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Shiny est un package utilisé pour créer des applications Web interactive avec R.
L’application Web peut être intégrée dans un document rmarkdown, une page Web, de manière autonome ou en tant que tableau de bord.</p>
<p>C’est vraiment puissant et nous pouvons créer des applications et des tableaux de bord assez rapidement.</p>
<p>Dans cet article, je vais parcourir les bases de Shiny, comment créer des applications simples et présenter le concept de réactivité.
Je vais juste donner les bases de l’interface utilisateur pour commencer et j’expliquerai plus en détail dans un autre article comment améliorer l’interface utilisateur ( <a href="https://www.christophenicault.com/fr/post/improve_shiny_ui/">retrouver l’article ici</a> )</p>
<p><br></p>
</div>
<div id="application-minimale" class="section level2">
<h2>Application minimale</h2>
<p><br>
Une application Shiny a besoin d’au moins les 4 lignes suivantes :</p>
<pre class="r"><code class="hljs"><span class="hljs-keyword">library</span>(shiny)

ui &lt;- fluidPage()

server &lt;- <span class="hljs-keyword">function</span>(input, output){}

shinyApp(ui, server)</code></pre>
<ul>
<li><code>library(shiny)</code> : Chargement de Shiny</li>
<li><code>ui &lt;- fluidPage()</code> : création de la page web, l’interface utilisateur (UX)</li>
<li><code>server &lt;- function(input, output){}</code> : la partie serveur, où la logique métier est implémentée</li>
<li><code>shinyApp(ui, server)</code> : création l’application avec l’UX et la logique de serveur précédemment créées.</li>
</ul>
<p><br><br></p>
</div>
<div id="afficher-un-simple-texte" class="section level2">
<h2>Afficher un simple texte</h2>
<p><br>
Cela fonctionne, mais l’application ne fait rien. La chose la plus simple que nous puissions faire est d’afficher un texte.</p>
<p>Il faut ajouter le texte à afficher dans la <code>fluidPage()</code>, le texte est passé en argument à la fonction :</p>
<pre class="r"><code class="hljs">ui &lt;- fluidPage(
  <span class="hljs-string">"Hi there, this is my text to display"</span>
)</code></pre>
<div class="figure">
<img src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/display_text_1.png" alt="">
<p class="caption">affichage d’un simple texte</p>
</div>
<p>Vous pouvez ajouter différents textes, ils seront affichés ensemble :</p>
<pre class="r"><code class="hljs">ui &lt;- fluidPage(
  <span class="hljs-string">"Hi there,"</span>,
  <span class="hljs-string">"this is my text to display"</span>
)</code></pre>
<p>Shiny utilise une liste de fonctions, appelées “tags”, pour recréer des balises HTML. Par exemple, pour ajouter le texte en titre h1 :</p>
<pre class="r"><code class="hljs">ui &lt;- fluidPage(
  tags$h1(<span class="hljs-string">"Hi there, this is my text to display"</span>)
)</code></pre>
<div class="figure">
<img src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/display_text_2.png" alt="">
<p class="caption">afficher le texte avec un tag H1</p>
</div>
<p><br></p>
<p><strong>Syntaxe pour les tags:</strong></p>
<p>Les balises html les plus courantes ont des fonctions wrapper et peuvent être utilisées comme décrit ci-dessus, en les appelant comme une fonction <code>h1("title")</code>, mais pour la plupart des balises, la syntaxe est <code>tags$h1("title" )</code></p>
<p>Les balises html les plus courantes pour formater le texte sont :</p>
<ul>
<li>titres hiérarchiques: h1(), h2(), h3(), h4(), h5(), h6()</li>
<li>italique: em()</li>
<li>mettre en gras: strong()</li>
<li>bloc de code: code()</li>
</ul>
<p>La liste de toutes les balises html disponibles peut être trouvée <a href="https://shiny.rstudio.com/articles/tag-glossary.html">here</a></p>
<p><br></p>
</div>
<div id="ajouter-un-graphique---utilisation-de-la-fonction-serveur" class="section level2">
<h2>Ajouter un graphique - utilisation de la fonction serveur</h2>
<p><br>
Maintenant, nous connaissons les bases pour afficher quelque chose, mais le but est de travailler avec des données et d’afficher nos résultats. Pour comprendre comment cela fonctionne, nous allons ajouter un graphique.</p>
<p>Pour ajouter un graphique, il y a 2 étapes :</p>
<ul>
<li>Créer le graphique : cela se fait dans la fonction <code>server()</code>
<ul>
<li>l’objet créé dans la fonction serveur doit être construit à l’intérieur d’un render (ici <code>renderPlot()</code>, pour un texte <code>renderText()</code>)</li>
<li>l’objet doit être enregistré dans une liste <code>output$&lt;outputId&gt;</code></li>
</ul></li>
<li>Afficher le graphique : cela se fait dans la fonction <code>fluidPage()</code>
<ul>
<li>créer la sortie en utilisant son outputId, ici dans une fonction <code>plotOutput()</code></li>
</ul></li>
</ul>
<pre class="r"><code class="hljs"><span class="hljs-keyword">library</span>(shiny)
<span class="hljs-keyword">library</span>(palmerpenguins)

ui &lt;- fluidPage(
  
  code(<span class="hljs-string">"My first plot in a Shiny app :"</span>),
  plotOutput(outputId = <span class="hljs-string">"penguin_plot"</span>)
  
)
server &lt;- <span class="hljs-keyword">function</span>(input, output){
  
  output$penguin_plot &lt;- renderPlot({
    <span class="hljs-keyword">library</span>(palmerpenguins)
    plot(penguins$bill_depth_mm, penguins$bill_length_mm, col = penguins$species)
  })
  
}

shinyApp(ui, server)</code></pre>
<div class="figure">
<img src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/add_a_plot.png" alt="">
<p class="caption">affichage d’un simple graphique</p>
</div>
<p>Pas à pas :</p>
<ol style="list-style-type: decimal">
<li>Créer le graphique dans une fonction <code>renderPlot()</code> dans la fonction <code>server()</code></li>
<li>Affecter le résultat à la variable de sortie “penguin_plot” <code>output$penguin_plot &lt;- renderPlot({ ... })</code> dans la fonction <code>server()</code></li>
<li>Affichez le graphique <code>plotOutput(outputId = "penguin_plot")</code>, en utilisant simplement la variable outputId (son identifiant, pas output$<outputid>) dans la fonction <code>fluidPage()</code></outputid></li>
</ol>
<p>Maintenant que nous avons construit une première application capable d’afficher un texte et un graphique, il est temps d’ajouter de l’interactivité et de générer du contenu en fonction des entrées.</p>
<p><br></p>
</div>
<div id="application-interactive" class="section level1">
<h1>Application interactive</h1>
<p><br>
Le but de la création d’une application Web est de pouvoir ajuster les paramètres et d’obtenir une sortie différente en fonction des nouvelles entrées.
Nous allons créer une telle application, où l’utilisateur peut entrer une donnée, et l’application fournira une sortie basée sur cette donnée.</p>
<p>La structure de l’application est proche de la précédente, il n’y a que 2 étapes à ajouter :</p>
<ul>
<li>Demander à l’utilisateur d’entrer une valeur dans l’interface utilisateur <code>fluidPage()</code></li>
<li>Lire cette valeur dans le <code>server()</code> pour l’utiliser et adapter la sortie</li>
</ul>
<p><br></p>
<div id="entrées" class="section level2">
<h2>Entrées</h2>
<p><br></p>
<p>Pour demander à l’utilisateur d’interagir, nous devons utiliser une fonction d’entrée (input function). La fonction d’entrée ressemble à <code>*Input(inputID, label, ...)</code> où * est le type des données, par exemple :</p>
<ul>
<li>textInput() pour du text</li>
<li>numericInput() pour une valeur numériques</li>
<li>dateInput() pour une date</li>
</ul>
<p>Ils ont deux paramètres obligatoires et quelques paramètres supplémentaires :</p>
<ul>
<li>inputId : l’identifiant de l’entrée pour y accéder dans le <code>server()</code></li>
<li>label : le texte qui s’affiche avec la saisie dans l’UI</li>
<li>… : paramètres supplémentaires, selon le type d’entrée</li>
</ul>
<p><code>numericInput()</code> a 4 paramètres supplémentaires, nous pouvons définir une valeur minimale et maximale, un pas incrémentiel et une largeur pour afficher la zone de saisie.
<code>textInput()</code> a 3 paramètres supplémentaires, une valeur initiale, la largeur de la zone de saisie et un espace réservé pour donner un indice.</p>
<pre class="r"><code class="hljs">ui &lt;- fluidPage(
  textInput(inputId = <span class="hljs-string">"name"</span>, label = <span class="hljs-string">"Enter your name"</span>, placeholder = <span class="hljs-string">"First name"</span>),
  numericInput(inputId = <span class="hljs-string">"age"</span>, label = <span class="hljs-string">"How old are you?"</span>, value = <span class="hljs-number">18</span>, min = <span class="hljs-number">18</span>)
)</code></pre>
<p><br></p>
</div>
<div id="accéder-à-linput-dans-la-fonction-server" class="section level2">
<h2>Accéder à l’input dans la fonction server()</h2>
<p><br>
La valeur saisie ne peut être lue que dans une fonction render. Pour y accéder, utilisez simplement la variable <code>input$&lt;inputId&gt;</code>. Par exemple, pour accéder au nom et à l’âge dans une fonction <code>render*()</code>, utilisez <code>input$name</code> et <code>input$age</code>.</p>
<pre class="r"><code class="hljs">server &lt;- <span class="hljs-keyword">function</span>(input, output){
  
  output$sentence &lt;- renderText({
    paste(<span class="hljs-string">"Hello"</span>, input$name, <span class="hljs-string">"You are"</span>, input$age, <span class="hljs-string">"years old."</span>)
  })
  
}</code></pre>
<p>Pour fonctionner, nous devons ajouter l’affichage de la sortie dans la fonction <code>fluidPage()</code>. Le code complet de cette application est :</p>
<pre class="r"><code class="hljs"><span class="hljs-keyword">library</span>(shiny)

ui &lt;- fluidPage(
  textInput(inputId = <span class="hljs-string">"name"</span>, label = <span class="hljs-string">"Enter your name"</span>, placeholder = <span class="hljs-string">"First name"</span>),
  numericInput(inputId = <span class="hljs-string">"age"</span>, label = <span class="hljs-string">"How old are you?"</span>, value = <span class="hljs-number">18</span>, min = <span class="hljs-number">18</span>),
  textOutput(<span class="hljs-string">"sentence"</span>)
)

server &lt;- <span class="hljs-keyword">function</span>(input, output, session) {
  output$sentence &lt;- renderText({
    paste(<span class="hljs-string">"Hello"</span>, input$name, <span class="hljs-string">"you are"</span>, input$age, <span class="hljs-string">"years old."</span>)
  })
}

shinyApp(ui, server)</code></pre>
<p>Voici l’application complète:
<img src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/first_application.png" alt="afficher les données saisies"></p>
<p>Décomposons l’application pour comprendre comment fonctionne l’interaction :</p>
<div class="figure">
<img src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/shiny_interaction.png" alt="">
<p class="caption">comprendre les interactions avec Shiny</p>
</div>
<ol style="list-style-type: decimal">
<li>Afficher les champs de saisie,</li>
<li>Entrer les valeurs, ça déclenche la fonction render qui utilise ces input,</li>
<li>La variable output$sentence est mise à jour, ce qui crée une réaction dans <code>textOuput()</code> dans la <code>fluidPage()</code></li>
<li>Le texte s’affiche.</li>
</ol>
<p><br></p>
</div>
</div>
<div id="réactivité" class="section level1">
<h1>Réactivité</h1>
<div id="les-bases-de-la-réactivité" class="section level2">
<h2>Les bases de la réactivité</h2>
<p><br>
Nous avons vu dans l’exemple précédent que dès que nous modifions l’entrée, la sortie réagit au changement et est mise à jour.
Shiny utilise la programmation réactive, si une modification est apportée à une variable, tout ce qui utilise cette variable est réévalué.</p>
<p>Les entrées sont toujours des variables réactives, et elles ne peuvent être utilisées que dans un contexte réactif.</p>
<p>Les fonctions <code>render*</code> sont des contextes réactifs, nous pouvons donc utiliser <code>input$variable</code> dans n’importe quelle fonction <code>render*</code>.
Mais la fonction <code>server()</code> ne l’est pas, et la variable d’entrée n’est pas accessible directement à l’intérieur de la fonction <code>server()</code> :</p>
<pre class="r"><code class="hljs">server &lt;- <span class="hljs-keyword">function</span>(input, output){
  print(input$name)
}</code></pre>
<p>Error in .getReactiveEnvironment()$currentContext() :
Operation not allowed without an active reactive context. (You tried to do something that can only be done from inside a reactive expression or observer.)</p>
</div>
<div id="observe" class="section level2">
<h2>observe({…})</h2>
<p>Heureusement, il existe d’autres contextes réactifs. <code>observe()</code> est un contexte réactif et est utilisé pour accéder à une variable d’entrée en dehors d’une fonction render*. Si on revient à l’exemple précédent, la bonne façon d’imprimer la variable serait :</p>
<pre class="r"><code class="hljs">server &lt;- <span class="hljs-keyword">function</span>(input, output){
  observe({
      print(input$bill_depth)
  })
}</code></pre>
<p>Pourquoi faire ça ?
Cela peut être très utile par exemple pour déboguer le code, et imprimer les valeurs de variable dans la console.</p>
</div>
<div id="reactive" class="section level2">
<h2>reactive({…})</h2>
<p><code>reactive()</code> est un autre contexte réactif et est utilisé pour créer une nouvelle variable réactive.</p>
<p>Si vous devez évaluer une variable intermédiaire, basée sur un calcul, qui sera utilisée dans plusieurs fonctions render*, utiliser reactive() pour éviter de dupliquer le calcul dans chaque fonction.</p>
<p>Syntaxe :</p>
<p>Pour créer une variable réactive :</p>
<pre class="r"><code class="hljs">new_variable &lt;- reactive({
  input$variable * <span class="hljs-number">2</span>
})</code></pre>
<p>Pour utiliser la nouvelle variable, vous devez ajouter des parenthèses comme si vous appeliez une fonction :</p>
<pre class="r"><code class="hljs">observe({
  print( new_variable() )
})</code></pre>
<p><em>Note</em> : ceci est important à retenir car cela peut être une source d’erreur
- si vous accédez à la variable d’entrée, appelez simplement le <code>input$&lt;variable&gt;</code> (sans parenthèse) dans un contexte réactif
- si vous accédez à une variable réactive créée avec <code>reactive()</code>, appelez <code>variable()</code> (avec parenthèse) dans un contexte réactif</p>
<p>Regardons un exemple pour illustrer cela. Votre application demande de sélectionner une plage pour la longueur du bec des pingouins, et d’afficher un tableau et un graphique correspondant aux données sélectionnées.</p>
<p>Sans <code>reactive()</code>, vous devez filtrer les données dans chaque fonction render* :</p>
<pre class="r"><code class="hljs">  output$penguin_plot &lt;- renderPlot({
    data &lt;- subset(penguins, bill_length_mm &gt; input$bill_length[<span class="hljs-number">1</span>] &amp; bill_length_mm &lt; input$bill_length[<span class="hljs-number">2</span>])
    plot(data$bill_depth_mm, data$bill_length_mm, col = data$species)
  })
  
  output$penguin_table &lt;- renderTable({
    data &lt;- subset(penguins, bill_length_mm &gt; input$bill_length[<span class="hljs-number">1</span>] &amp; bill_length_mm &lt; input$bill_length[<span class="hljs-number">2</span>])
    data
  })</code></pre>
<p>Dans cet exemple, il s’agit d’une simple sélection de données, mais nous pouvons voir comment cela peut affecter la vitesse de l’application si nous devons dupliquer un calcul complexe. Ici, la sélection est effectuée deux fois.</p>
<p>Avec <code>reactive()</code>, la sélection n’est faite qu’une seule fois, et la nouvelle variable contenant uniquement le résultat est ensuite utilisée dans chaque fonction render*. Les calculs sont plus efficaces, et en cas de modification, il n’y a pas de code dupliqué, la modification se fait uniquement dans la fonction réactive.</p>
<pre class="r"><code class="hljs">  data &lt;- reactive({
      subset(penguins, bill_length_mm &gt; input$bill_length[<span class="hljs-number">1</span>] &amp; bill_length_mm &lt; input$bill_length[<span class="hljs-number">2</span>])
  })
  
  output$penguin_plot &lt;- renderPlot({
    plot(data()$bill_depth_mm, data()$bill_length_mm, col = data()$species)
  })
  
  output$penguin_table &lt;- renderTable({
    data()
  })</code></pre>
<p>Notez la parenthèse pour accéder aux données variables, car elles ont été créées avec <code>reactive()</code>.</p>
<p>Ceci est l’application complète :</p>
<pre class="r"><code class="hljs"><span class="hljs-keyword">library</span>(shiny)
<span class="hljs-keyword">library</span>(palmerpenguins)

ui &lt;- fluidPage(
  sliderInput(inputId = <span class="hljs-string">"bill_length"</span>, label = <span class="hljs-string">"Select the range of bill length?"</span>, value = c(<span class="hljs-number">40</span>,<span class="hljs-number">50</span>), min = <span class="hljs-number">32</span>, max = <span class="hljs-number">60</span>),
  plotOutput(<span class="hljs-string">"penguin_plot"</span>),
  tableOutput(<span class="hljs-string">"penguin_table"</span>)
  
)
server &lt;- <span class="hljs-keyword">function</span>(input, output){
  
  observe({
      print(input$bill_length)
  })
  
  data &lt;- reactive({
      subset(penguins, bill_length_mm &gt; input$bill_length[<span class="hljs-number">1</span>] &amp; bill_length_mm &lt; input$bill_length[<span class="hljs-number">2</span>])
  })
  
  output$penguin_plot &lt;- renderPlot({
    plot(data()$bill_depth_mm, data()$bill_length_mm, col = data()$species)
  })
  
  output$penguin_table &lt;- renderTable({
    data()
  })
}

shinyApp(ui, server)</code></pre>
<p>Ce qui affiche :
<img src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/penguins_application.png" alt="afficher l’application pingouins complète"></p>
<p><br></p>
</div>
</div>
<div id="disposition" class="section level1">
<h1>Disposition</h1>
<p><br>
Jusqu’à présent, chaque fois que nous ajoutons un élément, ils sont affichés les uns sur les autres. Shiny fournit des fonctions pour améliorer la présentation et modifier la mise en page.</p>
<p>Une façon courante d’afficher une application Web consiste à avoir une barre latérale avec les entrées et à afficher le contenu dans un panneau principal. Shiny a une fonction pour cette mise en page classique qui s’appelle <code>sidebarLayout()</code>.</p>
<p>Le sidebarLayout utilise deux arguments, le <code>sidebarPanel()</code> et le <code>mainPanel()</code>. Vous placerez le code des entrées dans le <code>sidebarPanel()</code> et la sortie de rendu dans le <code>mainPanel()</code>.</p>
<p>Vous pouvez afficher un titre pour l’application en utilisant <code>titlePanel()</code></p>
<p>Voici l’application précédente utilisant le <code>sidebarLayout()</code> :</p>
<pre class="r"><code class="hljs">ui &lt;- fluidPage(
  
  titlePanel(<span class="hljs-string">"My analysis"</span>),
   
  sidebarLayout(
    
    sidebarPanel(
      sliderInput(inputId = <span class="hljs-string">"bill_length"</span>, label = <span class="hljs-string">"Select the range of bill length?"</span>, value = c(<span class="hljs-number">40</span>,<span class="hljs-number">50</span>), min = <span class="hljs-number">32</span>, max = <span class="hljs-number">60</span>)
    ),
    
    mainPanel(
      plotOutput(<span class="hljs-string">"penguin_plot"</span>),
      tableOutput(<span class="hljs-string">"penguin_table"</span>)
    )
    
  )
  
)</code></pre>
<div class="figure">
<img src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/sidebar.png" alt="">
<p class="caption">ajouter une barre latérale à l’application</p>
</div>
<p><br></p>
</div>
<div id="utilisation-de-différents-onglets" class="section level1">
<h1>Utilisation de différents onglets</h1>
<p><br>
Nous pouvons afficher la sortie dans différents onglets pour faciliter la navigation et éviter trop de choses à afficher.</p>
<p>Cela se fait facilement en utilisant la fonction <code>tabsetPanel()</code> pour envelopper tout le code des onglets, et <code>tabPanel()</code> pour chaque onglet.</p>
<p><code>tabPanel()</code> a deux paramètres :</p>
<ul>
<li>le nom de l’onglet à afficher</li>
<li>le code de la sortie</li>
</ul>
<pre class="r"><code class="hljs">ui &lt;- fluidPage(
  
  titlePanel(<span class="hljs-string">"My analysis"</span>),
   
  sidebarLayout(
    
    sidebarPanel(
      sliderInput(inputId = <span class="hljs-string">"bill_length"</span>, label = <span class="hljs-string">"Select the range of bill length?"</span>, value = c(<span class="hljs-number">40</span>,<span class="hljs-number">50</span>), min = <span class="hljs-number">32</span>, max = <span class="hljs-number">60</span>)
    ),
    
    mainPanel(
      tabsetPanel(
        tabPanel(title = <span class="hljs-string">"Plot"</span>,
                 plotOutput(<span class="hljs-string">"penguin_plot"</span>)
                 ),
        tabPanel(title = <span class="hljs-string">"Table"</span>,
                 tableOutput(<span class="hljs-string">"penguin_table"</span>)
                 )
      )
    )
    
  )
  
)</code></pre>
<div class="figure">
<img src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/with_tabs.png" alt="">
<p class="caption">utilisation des onglets</p>
</div>
<p><br></p>
</div>
<div id="structure-des-fichiers" class="section level1">
<h1>Structure des fichiers</h1>
<p><br>
Jusqu’à présent, pour les besoins de cet article, tout le code était dans un seul fichier. Il est préférable d’organiser l’application en au moins 3 fichiers :</p>
<ul>
<li>ui.R avec l’interface utilisateur</li>
<li>server.R pour la logique du serveur</li>
<li>app.R qui rassemble les 2 et lance l’application.</li>
</ul>
<p>J’ai écrit “au moins 3 fichiers” car vous voudrez peut-être utiliser un fichier nommé “global.R”. Ce fichier est appelé une fois lors du lancement de l’application, vous pouvez donc exécuter le code dont votre application aura besoin (comme le chargement et la manipulation des données) sans ajouter de complexité aux fichiers de votre application.</p>
<p>Le niveau suivant est d’utiliser des modules, qui ajoutent un autre niveau de réutilisabilité et d’organisation. Mais ce sera pour un prochain post.</p>
<p><br></p>
</div>
<div id="conclusion" class="section level1">
<h1>Conclusion</h1>
<p><br>
Dans cet article, j’ai couvert le développement d’une application Shiny pour montrer les différents principes clés pour démarrer. Nous avons vu le rôle du serveur et de l’interface utilisateur dans une application Shiny et avons appris à exécuter une application simple. Nous avons ajouté des entrées pour permettre l’interaction de l’utilisateur et avons parlé du concept de réactivité. Enfin, nous avons amélioré l’interface utilisateur en ajoutant une barre latérale et des onglets.</p>
<p>C’est suffisant pour démarrer et construire une vraie application. Mais bien sûr, il y a plus de possibilités avec Shiny, et dans le prochain article, je couvrirai spécifiquement l’interface utilisateur pour créer des applications plus complexes et améliorer leur apparence. Vous pouvez le trouver <a href="https://www.christophenicault.com/post/improve_shiny_ui/">ici</a></p>
</div>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="https://www.christophenicault.com/fr/tag/rstats/">rstats</a>
  
  <a class="badge badge-light" href="https://www.christophenicault.com/fr/tag/shiny/">Shiny</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://www.christophenicault.com/fr/post/introduction_to_shiny/&amp;text=Construisez%20votre%20premi%c3%a8re%20application%20avec%20Shiny" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://www.christophenicault.com/fr/post/introduction_to_shiny/&amp;t=Construisez%20votre%20premi%c3%a8re%20application%20avec%20Shiny" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Construisez%20votre%20premi%c3%a8re%20application%20avec%20Shiny&amp;body=https://www.christophenicault.com/fr/post/introduction_to_shiny/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://www.christophenicault.com/fr/post/introduction_to_shiny/&amp;title=Construisez%20votre%20premi%c3%a8re%20application%20avec%20Shiny" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  
    



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://www.christophenicault.com/"><img class="avatar mr-3 avatar-circle" src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/avatar_hudfb018a86c59d060e51f985569a5a050_59422_270x270_fill_q90_lanczos_center.jpg" alt="Christophe Nicault"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://www.christophenicault.com/">Christophe Nicault</a></h5>
      <h6 class="card-subtitle">Stratégie des Systèmes d’Information <br> Transformation Numérique <br> Data Science</h6>
      <p class="card-text">Je travaille sur la stratégie des systèmes d’information, les projets informatiques et la science des données.</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/cnicault" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/cnicault" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/christophe-nicault-62833b2/?locale=en_US" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>


  














  
  
  <div class="article-widget content-widget-hr">
    <h3>Sur le même sujet</h3>
    <ul>
      
      <li><a href="https://www.christophenicault.com/fr/post/improve_shiny_ui/">Améliorez l'apparence de votre application Shiny</a></li>
      
      <li><a href="https://www.christophenicault.com/fr/post/intro_process_mining/">Comprendre le process mining</a></li>
      
      <li><a href="https://www.christophenicault.com/fr/pages/visualizations/">Visualisation de données</a></li>
      
      <li><a href="https://www.christophenicault.com/fr/post/process_mining_demonstration/">Démonstration de process mining</a></li>
      
      <li><a href="https://www.christophenicault.com/fr/post/m5_forecasting_accuracy/">Compétition de prévisions de ventes : M5 Forecasting Accuracy</a></li>
      
    </ul>
  </div>
  





  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="https://www.christophenicault.com/fr/privacy/">Privacy Policy</a>
    
    
       · 
      <a href="https://www.christophenicault.com/fr/terms/">Terms</a>
     
  </p>
  

  <p class="powered-by">
    © Christophe Nicault 2022
  </p>

  
  





  
  
  
  

  
  
  
    
  

  

  
  <p class="powered-by copyright-license-text">
    This work is licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0" rel="noopener noreferrer" target="_blank">CC BY SA 4.0</a>
  </p>
  

  <p class="powered-by footer-license-icons">
    <a href="https://creativecommons.org/licenses/by-sa/4.0" rel="noopener noreferrer" target="_blank" aria-label="Creative Commons">
      <i class="fab fa-creative-commons fa-2x" aria-hidden="true"></i>
      <i class="fab fa-creative-commons-by fa-2x" aria-hidden="true"></i>
      
      
        <i class="fab fa-creative-commons-sa fa-2x" aria-hidden="true"></i>
      
    </a>
  </p>




  <p class="powered-by">
    
    
    
    Published with
    <a href="https://wowchemy.com/" target="_blank" rel="noopener">Wowchemy</a>  —
	Header picture by <a href="https://www.instagram.com/adrien.lch/" target="_blank" rel="noopener">Adrien Olichon</a>
    
  </p>
</footer>

    </div>
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Citation</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs latex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="https://www.christophenicault.com/fr/post/introduction_to_shiny/#" target="_blank">
          <i class="fas fa-copy"></i> Copier
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="https://www.christophenicault.com/fr/post/introduction_to_shiny/#" target="_blank">
          <i class="fas fa-download"></i> Télécharger
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    
    
      <script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/jquery.min.js.téléchargement" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

      
      
        <script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/imagesloaded.pkgd.min.js.téléchargement" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/isotope.pkgd.min.js.téléchargement" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      <script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/jquery.fancybox.min.js.téléchargement" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
      <script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/instantpage.min.js.téléchargement" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      

      
        
        <script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/highlight.min.js.téléchargement" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/r.min.js.téléchargement"></script>
        
        <script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/latex.min.js.téléchargement"></script>
        
      

    

    
    
      <script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/leaflet.min.js.téléchargement" integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/fr/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"Aucun résultat n'a été trouvé","placeholder":"Recherche...","results":"Résultats trouvés"};
      const content_type = {
        'post': "Posts",
        'project': "Projets",
        'publication' : "Publications",
        'talk' : "Présentations",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/fuse.min.js.téléchargement" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/jquery.mark.min.js.téléchargement" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="./Construisez votre première application avec Shiny _ Christophe Nicault_files/wowchemy.min.5c1cfc9ffc413fde56729358dc0e0e9d.js.téléchargement"></script>

    








</body></html>